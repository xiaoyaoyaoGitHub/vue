<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div id="app"></div>
</body>
<script src="../node_modules/@wangly/reactivity/dist/reactivity.global.js"></script>
<script>
    const {
        reactive,
        readonly,
        effect
    } = VueReactivity;
    const school = {
        name: 'wangly',
        age: '18',
        address: {
            num: '677'
        },
        score: [
            1, 2, 3, 45
        ]
    }

    const proxyReactive = reactive(school);

    effect(() => {
        // console.log('触发更新:' + proxyReactive.name);
        // console.log('触发更新:' +proxyReactive.name);
        // console.log('触发更新:' + proxyReactive.address);
        // effect(() => {
        //     console.log(proxyReactive.address);
        // })
        console.log('触发更新:' + proxyReactive.score)
    }, {
        lazy: false
    })
    // proxyReactive.score.length = 6
    setTimeout(() => {
        // proxyReactive.name = 'wangly change'
        // proxyReactive.name = 'wangly change1'
        // proxyReactive.name = 'wangly change2'
        // proxyReactive.name = 'wangly change3'
        // proxyReactive.address.num = '234'
        // proxyReactive.score.unshift(345)
        // proxyReactive.score.push(345)

        // proxyReactive.score.pop()
        // proxyReactive.score.shift()
        // proxyReactive.score[2] = 345
        // proxyReactive.score.length = 6
    }, 1000)

    // const proxyReactive = reactive(school);
    // proxyReactive.name = 'change wangly'
    // proxyReactive.score.push(4455)
    // proxyReactive.score[3] = 46

    // const proxyReadonly = readonly(school);
    // // proxyReadonly.name = 123
    // console.log(proxyReactive.address.num);
    // const reactive1 = reactive(school);
    // const reactive2 = readonly(school);
    // reactive2.name = 'change wangly'
    // console.log(reactive1 === reactive2);
</script>

</html>
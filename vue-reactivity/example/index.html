<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div id="app"></div>
</body>
<script src="../node_modules/@wangly/reactivity/dist/reactivity.global.js"></script>
<script>
    const {
        reactive,
        readonly,
        effect,
        ref,
        toRef,
        toRefs
    } = VueReactivity;
    const school = {
        name: 'wangly',
        age: '18',
        address: {
            num: '677'
        },
        score: [
            1, 2, 3, 45
        ]
    }
    const arrs = [1, 3, 4, 5]

    const proxyReactive = reactive(school);
    const arrsReactive = reactive(arrs);
    // console.log(proxyReactive);
    // const nameRef = toRef(proxyReactive, 'name')
    const proxyToRefs = toRefs(proxyReactive);
    const [a, b, c, d] = toRefs(arrsReactive)
    console.log(a, b, c, d);
    const {
        name: nameToRef,
        score: scoreToRef
    } = proxyToRefs
    console.log(nameToRef);
    console.log(scoreToRef);
    // console.log(nameRef);
    // const show = ref(true)

    effect(() => {

        console.log(a.value);

        // console.log(nameRef.value);

        // console.log('触发更新:' + proxyReactive.name);
        // console.log('触发更新:' +proxyReactive.name);
        // console.log('触发更新:' + proxyReactive.address);
        // effect(() => {
        //     console.log(proxyReactive.address);
        // })
        // console.log('触发更新:' + proxyReactive.score)
        // console.log(show.value);
    }, {
        lazy: false
    })
    // proxyReactive.score.length = 6
    setTimeout(() => {

        a.value = 'a'

        // nameRef.value = 'change wangly'

        // proxyReactive.name = 'wangly change'
        // proxyReactive.name = 'wangly change1'
        // proxyReactive.name = 'wangly change2'
        // proxyReactive.name = 'wangly change3'
        // proxyReactive.address.num = '234'
        // proxyReactive.score.unshift(345)
        // proxyReactive.score.push(345)
        // show.value = false
        // proxyReactive.score.pop()
        // proxyReactive.score.shift()
        // proxyReactive.score[2] = 345
        // proxyReactive.score.length = 6
    }, 1000)

    // const proxyReactive = reactive(school);
    // proxyReactive.name = 'change wangly'
    // proxyReactive.score.push(4455)
    // proxyReactive.score[3] = 46

    // const proxyReadonly = readonly(school);
    // // proxyReadonly.name = 123
    // console.log(proxyReactive.address.num);
    // const reactive1 = reactive(school);
    // const reactive2 = readonly(school);
    // reactive2.name = 'change wangly'
    // console.log(reactive1 === reactive2);
</script>

</html>